<div ng-class="view.classes" loading="view.loading">

    <div class="heading">
        <a ng-href="#/repos" class="btn btn-default pull-left go-back"><i class="fa fa-chevron-left"></i> Back</a>
        <h1>
            {{ view.repo.owner }}/{{ view.repo.name }} <span class="created-by">({{ view.repo.created_by }})</span>
            <div class="actions pull-right" ng-if="!(view.user | isEmpty)">
                <a ng-if="!view.repo.git && view.user.login === view.repo.owner" href ng-click="manageRepoModal()" class="btn btn-primary"><i class="fa fa-pencil"></i> Edit</a>
                <i ng-if="view.repo.git" class="fa fa-github github-flag" tooltip="This repo is imported from GitHub" tooltip-placement="left"></i>
            </div>
        </h1>
    </div>
    <!-- # .heading -->

    <div ng-if="!view.loading" class="content">

        <div class="nav nav-tabs">
            <li ng-class="{active: view.tab === 'apps'}" class=""><a href ng-click="switchTab('apps')">Tools</a></li>
            <li ng-class="{active: view.tab === 'builds'}" class=""><a href ng-click="switchTab('builds')">Builds</a></li>
        </div>

        <section ng-if="view.tab === 'apps'">
            <table class="table table-hover apps">
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="app in view.apps">
                        <td><a ng-href="#/app/{{ app._id }}">{{ app.name }}</a></td>
                        <td><p tooltip="{{ app.description }}" tooltip-popup-delay="1000">{{ app.description }}</p></td>
                    </tr>
                    <tr class="empty" ng-if="view.apps.length === 0">
                        <td colspan="3"><p class="alert alert-info">There are no apps found in this repo</p></td>
                    </tr>
                </tbody>
            </table>
        </section>

        <section ng-if="view.tab === 'builds'">
            <table class="table table-hover builds">
                <thead>
                    <tr>
                        <th class="field-status"></th>
                        <th class="field-id">Build</th>
                        <th class="field-message">Message</th>
                        <th class="field-commit">Commit</th>
                        <th class="field-committer">Committer</th>
                        <th class="field-date">Duration</th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="build in view.builds">
                        <td class="field-status">
                            <span class="status fa {{ build.status }}"
                                  tooltip="{{ build.status }}"
                                  ng-class="{'fa-check-circle': build.status === 'success', 'fa-time': build.status === 'pending', 'fa-remove-circle': build.status === 'failure', 'fa-repeat': build.status === 'running'}">
                            </span>
                        </td>
                        <td class="field-id">
                            <a ng-href="#/build/{{ build._id }}" tooltip="{{ build._id }}" tooltip-popup-delay="1000">#{{ build._id }}</a>
                        </td>
                        <td class="field-message">
                            <p tooltip="{{ build.head_commit.message }}" tooltip-popup-delay="1000">{{ build.head_commit.message }}</p>
                        </td>
                        <td class="field-commit">
                            <a href="{{ build.head_commit.url }}" target="_blank" tooltip="{{ build.head_commit.id }}" tooltip-popup-delay="1000">{{ build.head_commit.id }}</a>
                        </td>
                        <td class="field-committer">{{ build.head_commit.committer.name }}</td>
                        <td class="field-date">{{ build.head_commit.timestamp | date:'short' }}</td>
                    </tr>
                    <tr class="empty" ng-if="view.builds.length === 0">
                        <td colspan="7"><p class="alert alert-info">There are no builds found in this repo</p></td>
                    </tr>
                </tbody>
            </table>
        </section>

    </div>
    <!-- # .content -->

    <div class="paginate" ng-if="!view.loading && view.tab === 'apps' && view.apps.length > 0">
        <button ng-disabled="!view.paginator.apps.prev || view.paginator.apps.loading" class="btn btn-default pull-left" ng-click="goToPage('prev')"><i class="fa fa-chevron-left"></i></button>
        <span class="page-number">{{ view.paginator.apps.page }} / {{ view.paginator.apps.total }}</span>
        <button ng-disabled="!view.paginator.apps.next || view.paginator.apps.loading" class="btn btn-default pull-right" ng-click="goToPage('next')"><i class="fa fa-chevron-right"></i></button>
    </div>
    <!-- # .paginate -->

    <div class="paginate" ng-if="!view.loading && view.tab === 'builds' && view.builds.length > 0">
        <button ng-disabled="!view.paginator.builds.prev || view.paginator.builds.loading" class="btn btn-default pull-left" ng-click="goToPage('prev')"><i class="fa fa-chevron-left"></i></button>
        <span class="page-number">{{ view.paginator.builds.page }} / {{ view.paginator.builds.total }}</span>
        <button ng-disabled="!view.paginator.builds.next || view.paginator.builds.loading" class="btn btn-default pull-right" ng-click="goToPage('next')"><i class="fa fa-chevron-right"></i></button>
    </div>
    <!-- # .paginate -->
</div>